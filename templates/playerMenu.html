{{ template "head.html" .}}

<div id="Menu" hx-ext="ws" ws-connect="/socket" class="flex flex-col justify-center h-full">
    <div id="flashcard"
        class=" flex justify-center items-center border border-red-300 text-red-300 p-3 rounded-lg cursor-not-allowed opacity-50"
        hidden>
        Give me a name buddy!
    </div>
    <div id="UI" class="flex flex-col justify-center items-center h-96 text-white">
        <form id="form" ws-send class="flex flex-col gap-1 justify-center items-center h-full w-full">
            <span> Quizaara: Kahoot per Saretta</span>
            <span class="mt-4"> Give me a name! </span>
            <input class="border border-violet-400 rounded-lg" type="text" name="name" />
            <span class="mt-4"> Which lobby? </span>
            <input class="border border-violet-400 rounded-lg" type="text" name="lobby" />
            {{ if .Sara }}
            <span class="mt-4"> La password; vichingo! </span>
            <input class="border border-violet-400 rounded-lg" type="text" name="pwd" />
            {{ end }}
            <button class="border border-blue-400 rounder-lg bg-blue-800">
                La accendiamo?
            </button>
        </form>
    </div>
    <script>
        document.addEventListener("htmx:wsBeforeMessage", async function () {
            const name = document.getElementsByName("name")[0].value
            const lobby = document.getElementsByName("lobby")[0].value
            console.log(name, lobby)

            await cookieStore.set({
                name: "player_code",
                value: name,
                expires: Date.now() + 1000 * 60 * 60 * 24,
                path: "/",
                sameSite: "lax",
                secure: true
            });

            await cookieStore.set({
                name: "lobby_name",
                value: lobby,
                expires: Date.now() + 1000 * 60 * 60 * 24,
                path: "/",
                sameSite: "lax",
                secure: true
            });
        });
    </script>
</div>

{{ template "footer.html" .}}
